---
layout: post
title: "Git을 이용한 버전관리"
description: "Git 사용법에 대해 적어놓았습니다."
tags: [git, version control, usage]
share: true
comments: true
---

### 1. Git으로 버전관리 시작하기 (git init)

git으로 버전관리를 시작할 디렉토리에 들어가서 `git init`이라는 명령어를 입력하여 새로운 로컬 저장소를 만든다. 이는 현재 위치에 `.git` 폴더를 만들고 그 안에 git으로 버전관리를 하기 위한 여러 파일들이 생성되게 된다.

```
$ git init
Initialized empty Git repository in /home/user01/project/.git/
```

생성된 파일들이 무엇인지 한번 살펴보자. `tree .git` 명령어로 방금 전에 생성한 `.git` 폴더의 구조와 파일들을 살펴볼 수 있다.

```
$ tree .git
.git
|-- branches
|-- config
|-- description
|-- HEAD
|-- hooks
|   |-- applypatch-msg.sample
|   |-- commit-msg.sample
|   |-- post-update.sample
|   |-- pre-applypatch.sample
|   |-- pre-commit.sample
|   |-- prepare-commit-msg.sample
|   |-- pre-rebase.sample
|   `-- update.sample
|-- info
|   `-- exclude
|-- objects
|   |-- info
|   `-- pack
`-- refs
    |-- heads
    `-- tags
```

만들어진 git 저장소의 상태를 살펴보기 위해서는 `git status` 명령어를 입력한다. git은 관리되어야 할 파일을 따로 추가해줘야 버전 관리를 시작한다. 따라서 어떤 파일들이 현재 관리되고 있고 관리되지 않는지, 그리고 관리되는 파일 중에 어떤 파일이 이전 커밋(commit, 뒤에 설명함)을 기준으로 해서 수정되었고 수정되지 않았는지를 이 명령어를 통해 확인할 수 있다.

```
$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       LICENSE
#       scripts/
#       setup.py
nothing added to commit but untracked files present (use "git add" to track)
```

### 2. Git으로 관리할 파일 추가(git add) 및 삭제(git rm --cached)하기

관리되고 있지 않은 파일(untracked files)을 관리되는 파일(tracked files)로 바꾸려면 `git add` 명령어를 이용해 파일을 추가해주면 된다. 아래는 LICENSE 파일과 setup.py 파일을 버전관리를 적용할 대상 파일로 삼겠다는 명령이다. 이후 다시 `git status`를 입력하여 달라진 상태를 확인할 수 있을 것이다. 살펴보면 setup.py가 새로운 파일로 추가되었음을 알 수 있다.

```
$ git add LICENSE
$ git add setup.py
$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#       new file:   LICENSE
#       new file:   setup.py
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       scripts/
```

만약에 버전관리가 필요 없는 파일을 잘못하여 추가했다면 `git rm --cached <file>` 명령으로 관리대상에서 다시 제외 시킬 수도 있다. LICENSE 파일을 다시 관리대상에서 제외하려면 다음과 같이 입력한다. `--cached` 옵션을 주는 이유는 파일은 실제로 삭제되지 않고 관리대상에서만 제외시키기 위함이다. 만약에 파일도 삭제하고 싶으면 그 대신 `-f` 옵션을 주면 된다.

```
$ git rm --cached LICENSE
rm 'LICENSE'
```

### 3. Git으로 현재 시점 커밋하기 (git commit)



### 4. 원격 저장소 이용하기

#### 4.1. 복제해오고(clone), 가져오고(pull), 올려두기(push)

원격 저장소로부터 파일들을 다운로드 받기 위해서는 복제(clone)를 하면 된다. 원격 저장소에 접속하면 아래와 같이 'clone or download'라는 초록색 버튼이 보인다. 이 버튼을 클릭하고 'Use HTTPS'를 클릭하여 다운로드 받을 원격 저장소의 주소를 얻어온다.

![Image](/images/2017-07-28/fig1.png?v1 "git clone"){: .center-image}

그리고 로컬 환경에서 `git clone`명령어를 이용해 원격 저장소의 파일들을 다음과 같이 다운로드 받는다.

```
$ git clone https://github.com/biopython/biopython.git
Cloning into 'biopython'...
remote: Counting objects: 74562, done.
remote: Compressing objects: 100% (52/52), done.
remote: Total 74562 (delta 19), reused 28 (delta 9), pack-reused 74500
Receiving objects: 100% (74562/74562), 43.74 MiB | 4.55 MiB/s, done.
Resolving deltas: 100% (55587/55587), done.
Checking out files: 100% (2098/2098), done.
```




git으로 관리되지 않는 디렉토리에서 `git status`를 치면 다음과 같이 나타난다.

```
$ git status
fatal: Not a git repository (or any parent up to mount point /home/user)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
```

버전관리에 적용할 파일 추가하기 (git add)
```
$ git add main.py
```


변경된 내용 버전관리에 적용하기 (git commit)

```
$ git commit -m "Updated python scripts"
```


### 8. Git의 환경 설정: git config

Git의 설정을 담고 있는 파일들은 계층에 따라 세 개가 존재한다. 각 설정은 역순으로 우선시된다.

* `/etc/gitconfig`: 시스템의 모든 사용자와 저장소에 적용되는 설정. `git config --system` 명령으로 읽고 쓸 수 있다.
* `~/.gitconfig`: 해당 사용자의 홈 디렉토리에 저장되므로 해당 사용자에게만 적용되는 설정. `git config --global` 명령으로 읽고 쓸 수 있다.
* `.git/config`: 작업 중인 Git 디렉토리(특정 저장소)에만 적용되는 설정.

#### 8.1. 사용자 정보 설정하고 설정한 정보들을 확인하기

```
$ git config --global user.name "Sukjun Kim"
$ git config --global user.email "dandyrilla@naver.com"
```

설정한 정보들을 모두 확인하려면 다음과 같이 `git config --list` 명령을 사용한다.

```
$ git config --list
user.name=Sukjun Kim
user.email=dandyrilla@naver.com
```

또는 설정한 특정 키 값만을 보려면 `git config {key}`와 같이 입력하면 된다.

```
$ git config user.name
Sukjun Kim
```

#### 8.2. config 명령의 도움말 보기

user.name, user.email 말고도 config 명령으로 지정할 수 있는 글로벌 변수들이 매우 많다. 이를 보려면 다음과 같이 입력하면 된다. config 명령어 외에도 다른 명령어에 대한 도움말을 보고 싶다면 `git help {command}`와 같이 입력하면 man page를 보여준다.

```
$ git help config
```


### 9. Git 사용법 정리된 문서들

* [Git 공식 매뉴얼](https://git-scm.com/book/ko/v2/%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-%EB%B2%84%EC%A0%84-%EA%B4%80%EB%A6%AC%EB%9E%80%3F)
* [누구나 쉽게 이해할 수 있는 Git 입문: 버전 관리를 완벽하게 이용해보자](https://backlogtool.com/git-guide/kr/)